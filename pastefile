public class SHAWAutoFillController : Controller
{
    private readonly SourceRepository _sourceRepository;

    public SHAWAutoFillController(SourceRepository sourceRepository)
    {
        _sourceRepository = sourceRepository;
    }

    public async Task<IActionResult> Index()
    {
        var model = new SHAWAutoFillViewModel
        {
            Sources = await _sourceRepository.GetSourcesAsync()
        };

        return View(model);
    }

    [HttpPost]
    public async Task<IActionResult> Index(SHAWAutoFillViewModel model)
    {
        if (ModelState.IsValid)
        {
            // Normally, save the data to DB here
            TempData["SuccessMessage"] = "Form submitted successfully!";
            return RedirectToAction("Index"); // Redirect to clear the form
        }

        // Reload sources dropdown if form validation fails
        model.Sources = await _sourceRepository.GetSourcesAsync();
        return View(model);
    }
}
